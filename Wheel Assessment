##### Setting Up the File #####

import random
import json

words_file = open(r'Words.txt')
words_text = words_file.read().splitlines()
words_file.close()

##### Declaring Variables #####

new_word_list = []
vowels = ['a', 'e', 'i', 'o', 'u']
consonants = list('bcdfghjklmnpqrstvwxyz')
consonants_guessed = []
vowels_guessed = []

player_info = {'Player 1':{'Round 1 Bank':0, 'Round 2 Bank':0, 'Total':0}, 
    'Player 2':{'Round 1 Bank':0, 'Round 2 Bank':0, 'Total':0},
    'Player 3':{'Round 1 Bank':0, 'Round 2 Bank':0, 'Total':0}}

print(player_info)

round_money = 0

for word in words_text:
   if word.isalpha() == True:
       new_word_list.append(word)

wheel = {}
wheel_cash_segments = range(18)

for number in wheel_cash_segments[1:]:
    wheel[number] = 50 + (50 * number)

wheel[18] = 'Lose a Turn'
wheel[19] = 'bankrupt'.upper()

##### Creating Functions #####

def bankrupt(player, round):
    print('Uh oh! You hit BANKRUPT')
    if player == 1:
        if round == 1:
            player_info['Player 1']['Round 1 Bank'] = 0
        elif round == 2:
            player_info['Player 1']['Round 2 Bank'] = 0
    elif player == 2: 
        if round == 1:
            player_info['Player 2']['Round 1 Bank'] = 0
        elif round == 2:
            player_info['Player 2']['Round 2 Bank'] = 0
    elif player == 3:
        if round == 1:
            player_info['Player 3']['Round 1 Bank'] = 0
        elif round == 2:
            player_info['Player 3']['Round 2 Bank'] = 0

def choose_word():
    global word_choice
    global number
    global listed_word
    listed_word = []
    word_choice = random.choice(new_word_list).lower()
    for number in word_choice:
        listed_word.append("_")

def guess_consonant():
    global guessed_correctly_value
    global consonant_guess
    consonant_guess = input("Guess a consonant")
    if len(consonant_guess) == 1:
        if consonant_guess not in consonants and consonant_guess not in consonants_guessed:
            consonants_guessed.append(consonant_guess)
            print("That's not a consonant. Pick again.")
            guess_consonant()
        elif consonant_guess in consonants_guessed:
            print("Choose a different consonant.")
    elif len(consonant_guess) > 1:
        if consonant_guess == word_choice:
            print("You guessed correctly")
            guessed_correctly_value = 1

def buy_vowel():
    global round_money
    global vowels_guessed
    global vowel_chosen
    if round_money < 250:
        print("Oops! You don't have enough money.")
    else:
        print(f'Your current budget: ${round_money}')
        vowel_chosen = input("Buy a vowel for $250")
        if vowel_chosen not in vowels:
            print("That's not a vowel. Pick again.")
            buy_vowel()
        if vowel_chosen in word_choice and vowel_chosen not in vowels_guessed:
            vowels_guessed.append(vowel_chosen)
            for letter_spot in range(len(word_choice)):
                if(word_choice[letter_spot] == vowel_chosen):
                    listed_word[letter_spot] = word_choice[letter_spot]
            print(" ".join(listed_word))
            if input("Would you like to guess a vowel?Y/N").upper() == "Y":
                round_money = round_money - 250
                buy_vowel()
        elif vowel_chosen in vowels_guessed:
            print("This vowel has already been chosen, chose another one")
            buy_vowel()
        else: 
            print("That vowel is not in the word")
            round_money = round_money - 250

choose_word()

def set_bank(player, round, round_money):

    if player == 1:
        if round == 1:
            player_info['Player 1']['Round 1 Bank'] = round_money
        if round == 2:
            player_info['Player 1']['Round 2 Bank'] = round_money
    elif player == 2:
        if round == 1:
            player_info['Player 2']['Round 1 Bank'] = round_money
        if round == 2:
            player_info['Player 2']['Round 2 Bank'] = round_money
    elif player == 3:
        if round == 1:
            player_info['Player 3']['Round 1 Bank'] = round_money
        if round == 2:
            player_info['Player 3']['Round 2 Bank'] = round_money

def set_round_money(player, round):
    global round_money
    if player == 1:
        if round == 1:
            round_money = player_info['Player 1']['Round 1 Bank']
        if round == 2:
            round_money = player_info['Player 1']['Round 2 Bank']
    elif player == 2:
        if round == 1:
            round_money = player_info['Player 2']['Round 1 Bank']
        if round == 2:
            round_money = player_info['Player 2']['Round 2 Bank']
    elif player == 3:
        if round == 1:
            round_money = player_info['Player 3']['Round 1 Bank']
        if round == 2:
            round_money = player_info['Player 3']['Round 2 Bank']

def show_bank(player):
    if player == 1:
        print(player_info['Player 1'])
    elif player == 2:
        print(player_info['Player 2'])
    elif player == 3:
        print(player_info['Player 3'])

player = 1
print(consonants_guessed)

def spin_wheel(player, round):
    global guessed_correctly_value
    guessed_correctly_value = 0
    global round_money
    while guessed_correctly_value == 0:
        if len(consonants_guessed) < 21:
            segment_number = random.randint(1, 19)

            set_round_money(player, round)

            print(" ".join(listed_word))

            if player == 1 or player == 2:
                next_player = int(player + 1)
            elif player == 3:
                next_player = 1
            
            print(f'Player: {player}, Round: {round}')

            print(f'You can earn: ${wheel[segment_number]}')
            print(f'Your current budget: ${round_money}')
            
            if wheel[segment_number] == 'Lose a Turn':
                spin_wheel(player = next_player, round = round)
            elif wheel[segment_number] == 'BANKRUPT':
                bankrupt(player, round)
                spin_wheel(next_player, round)
            elif wheel[segment_number] in range(100,950):
                guess_consonant()
                if consonant_guess in word_choice and consonant_guess not in consonants_guessed:
                    consonants_guessed.append(consonant_guess)
                    round_money = round_money + (wheel[segment_number] * word_choice.count(consonant_guess))
                    set_bank(player, round, round_money)
                    print(f'Your current budget: ${round_money}')
                    for x in range(len(listed_word)):
                        if consonant_guess == word_choice[x]:
                            listed_word[x] = consonant_guess
                    print(" ".join(listed_word))
                    while round_money >= 250:
                        print(round_money)
                        vowel_input = input("Would you like to buy a vowel? Y/N or W to guess a word word").upper()
                        if vowel_input == 'Y':
                            print(" ".join(listed_word))
                            buy_vowel() 
                            if vowel_chosen not in vowels_guessed:
                                round_money = round_money - 250
                                spin_wheel(next_player, round)
                            round_money = round_money - 250
                            set_bank(player, round, round_money)
                            for x in range(len(listed_word)):
                                if vowel_chosen == word_choice[x]:
                                    listed_word[x] = vowel_chosen
                            print(" ".join(listed_word))
                            continue
                        elif vowel_input == "N":
                            break
                        elif vowel_input == 'W':
                            word_guess = input("What's your guess?")
                            if word_guess == word_choice:
                                print("You did it!!")
                                guessed_correctly_value == 1
                            else:
                                print("Nope! Wrong word!")
                                spin_wheel(next_player, round)
                        else: 
                            print("You're out of money! Spin the wheel again.")
                            break
                    spin_wheel(player, round)
                elif consonant_guess in consonants_guessed:
                    print("That consonant has already been guessed. Pick another")
                    spin_wheel(player, round)
                else:
                    print("That consonant is not there")
                    consonants_guessed.append(consonant_guess)
                    spin_wheel(next_player, round)
        else:
            while round_money >= 250:
                print(round_money)
                vowel_input = input("Would you like to buy a vowel? Y/N").upper()
                if vowel_input == 'Y':
                    print(" ".join(listed_word))
                    buy_vowel() 
                    if vowel_chosen not in vowels_guessed:
                        spin_wheel(next_player, round)
                    round_money = round_money - 250
                    set_bank(player, round, round_money)
                    for x in range(len(listed_word)):
                        if vowel_chosen == word_choice[x]:
                            listed_word[x] = vowel_chosen
                    print(" ".join(listed_word))
                    continue
                elif vowel_input == "N":
                    break
                else: 
                    print("You're out of money! Spin the wheel again.")
                    break
    print(f'The word was {word_choice}. Onto the next round.')
    
spin_wheel(player = 1, round = 1)

#for player in player_info:
#    player['Total'] = player['Round 1 Bank'] + player['Round 2 Bank']

print(player_info)

spin_wheel(player = 1, round = 2)

print(player_info)

if (player_info['Player 1']['Total'] > player_info['Player 2']['Total']) and (
    player_info['Player 1']['Total'] > player_info['Player 3']['Total']):
        advancing_player = 'Player 1'
elif (player_info['Player 2']['Total'] > player_info['Player 1']['Total']) and (
    player_info['Player 2']['Total'] > player_info['Player 3']['Total']):
        advancing_player = 'Player 2'
elif (player_info['Player 3']['Total'] > player_info['Player 1']['Total']) and (
    player_info['Player 3']['Total'] > player_info['Player 2']['Total']):
        advancing_player = 'Player 3'

print(advancing_player)